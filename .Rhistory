library(DDLab)
library(DDLab)
library(DDLab)
library(roxygen2)
library(roxygen2)
library(DDLab)
roxygen2::roxygenise()
data <- read_csv('../Eyetracking_EL_Stuff/datavyu_out.csv')
library(readr)
data <- read_csv('../Eyetracking_EL_Stuff/datavyu_out.csv')
View(data)
library(dplyr)
?fill()
dvdata <- data
dvdata2 <- dvdata %>%
fill(SubID.SUBID)
library(tidyr)
dvdata2 <- dvdata %>%
fill(SubID.SUBID)
View(dvdata2)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
rename(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID) %>%
group_by(ID, Trial) %>%
rename(Direction = TrialLook.looking_direction | TrialLook.looking_code01)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
rename(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID) %>%
group_by(ID, Trial) %>%
rename(Direction = TrialLook.looking_direction | Direction = TrialLook.looking_code01)
TrialLook.looking_direction %in% names(data)
'TrialLook.looking_direction' %in% names(data)
'TrialLook.looking_code01' %in% names(data)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
rename(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID) %>%
group_by(ID, Trial) %>%
rename(Direction = ifelse("TrialLook.looking_direction" %in% names(dvdata), TrialLook.looking_direction, TrialLook.looking_code01))
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
rename(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID) %>%
group_by(ID, Trial) %>%
mutate(Direction = ifelse("TrialLook.looking_direction" %in% names(dvdata), TrialLook.looking_direction, TrialLook.looking_code01))
View(dvdata2)
direction = 'TrialLook.looking_code01'
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID) %>%
group_by(ID, Trial) %>%
rename(Direction = direction) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration) %>%
group_by(ID, Trial, Load, ChangeSide)
View(dvdata2)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration)
View(dvdata2)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Direction = stringr::str_to_upper(Direction)) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset,
Right = ifelse(Direction == 'R', Duration, 0),
Left = ifelse(Direction == 'L', Duration, 0)) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration) %>%
group_by(ID, Trial, Load, ChangeSide) %>%
View(dvdata2)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Direction = stringr::str_to_upper(Direction)) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset,
Right = ifelse(Direction == 'R', Duration, 0),
Left = ifelse(Direction == 'L', Duration, 0)) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration)
View(dvdata2)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Direction = stringr::str_to_upper(Direction)) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset,
Right = ifelse(Direction == 'R', Duration, 0),
Left = ifelse(Direction == 'L', Duration, 0)) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration, Left, Right)
View(dvdata2)
dvdata2 <- dvdata %>%
tidyr::fill(SubID.SUBID) %>%
mutate(Trial = TrialLook.trials_trialnum,
ID = SubID.SUBID,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Direction = stringr::str_to_upper(Direction)) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset,
Right = ifelse(Direction == 'R', Duration, 0),
Left = ifelse(Direction == 'L', Duration, 0)) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration, Left, Right) %>%
group_by(ID, Trial, Load, ChangeSide) %>%
summarise(TLT = sum(Duration),
Right = sum(Right),
Left = sum(Left),
Looks = length(Direction)) %>%
mutate(Switch = Looks - 1,
PercLook = TLT/10000,
MLD = TLT/Looks,
SR = Switch/(TLT/1000),
CP = ifelse(ChangeSide == 'L', Left/TLT, Right/TLT),
Both = ifelse(Left > 0 & Right > 0, 'Y', 'N'),
ToCode = NA) %>%
ungroup()
View(dvdata2)
library(DDLab)
roxygenise()
dvdata <- data
dvsubj <- dvdata %>%
select(SubID.SUBID, SubID.onset) %>%
rename(TrialLook.offset = SubID.onset)
dvsubj <- dvdata %>%
select(SubID.SUBID, SubID.onset) %>%
rename(TrialLook.offset = SubID.onset) %>%
filter(!is.na(SubID.SUBID))
dvdata2 <- dvdata %>%
mutate(Trial = TrialLook.trials_trialnum,
Load = TrialLook.trials_ss,
ChangeSide = TrialLook.trials_changeside) %>%
filter(!is.na(Trial)) %>%
rename(Direction = direction) %>%
mutate(Direction = stringr::str_to_upper(Direction)) %>%
mutate(Duration = TrialLook.offset - TrialLook.onset,
Right = ifelse(Direction == 'R', Duration, 0),
Left = ifelse(Direction == 'L', Duration, 0))
View(dvdata2)
dvdata3 <- merge(dvsubj, dvdata2, by = 'TrialLook.offset', all = T)
View(dvdata3)
dvdata4 <- dvdata3 %>%
tidyr::fill(SubID.SUBID) %>%
filter(!is.na(Duration)) %>%
rename(ID = SubID.SUBID) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration, Left, Right) %>%
group_by(ID, Trial, Load, ChangeSide) %>%
summarise(TLT = sum(Left) + sum(Right),
Right = sum(Right),
Left = sum(Left),
Looks = length(Direction)) %>%
mutate(Switch = Looks - 1,
PercLook = TLT/10000,
MLD = TLT/Looks,
SR = Switch/(TLT/1000),
CP = ifelse(ChangeSide == 'L', Left/TLT, Right/TLT),
Both = ifelse(Left > 0 & Right > 0, 'Y', 'N'),
ToCode = NA) %>%
ungroup()
View(dvdata3)
dvdata4 <- dvdata3 %>%
tidyr::fill(SubID.SUBID.x) %>%
filter(!is.na(Duration)) %>%
rename(ID = SubID.SUBID.x) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration, Left, Right) %>%
group_by(ID, Trial, Load, ChangeSide) %>%
summarise(TLT = sum(Left) + sum(Right),
Right = sum(Right),
Left = sum(Left),
Looks = length(Direction)) %>%
mutate(Switch = Looks - 1,
PercLook = TLT/10000,
MLD = TLT/Looks,
SR = Switch/(TLT/1000),
CP = ifelse(ChangeSide == 'L', Left/TLT, Right/TLT),
Both = ifelse(Left > 0 & Right > 0, 'Y', 'N'),
ToCode = NA) %>%
ungroup()
View(dvdata4)
dvdata4 <- dvdata3 %>%
tidyr::fill(SubID.SUBID.x) %>%
filter(!is.na(Duration)) %>%
rename(ID = SubID.SUBID.x) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration, Left, Right) %>%
group_by(ID, Trial, Load, ChangeSide) %>%
summarise(TLT = sum(Left) + sum(Right),
Right = sum(Right),
Left = sum(Left),
Looks = length(Direction)) %>%
mutate(Switch = Looks - 1,
PercLook = TLT/10000,
MLD = TLT/Looks,
SR = Switch/(TLT/1000),
CP = ifelse(ChangeSide == 'L', Left/TLT, Right/TLT),
Both = ifelse(Left > 0 & Right > 0, 'Y', 'N'),
ToCode = 'Coded',
ID = stringr::str_remove(ID, '_')) %>%
ungroup()
dvdata4 <- dvdata3 %>%
tidyr::fill(SubID.SUBID.x) %>%
filter(!is.na(Duration)) %>%
rename(ID = SubID.SUBID.x) %>%
select(ID, Trial, Load, ChangeSide, Direction, Duration, Left, Right) %>%
group_by(ID, Trial, Load, ChangeSide) %>%
summarise(TLT = sum(Left) + sum(Right),
Right = sum(Right),
Left = sum(Left),
Looks = length(Direction)) %>%
mutate(Switch = Looks - 1,
PercLook = TLT/10000,
MLD = TLT/Looks,
SR = Switch/(TLT/1000),
CP = ifelse(ChangeSide == 'L', Left/TLT, Right/TLT),
Both = ifelse(Left > 0 & Right > 0, 'Y', 'N'),
ToCode = 'Coded') %>%
ungroup() %>%
mutate(ID = stringr::str_remove(ID, '_'))
View(dvdata4)
library(DDLab)
roxygenize()
data <- read_csv('../Eyetracking_EL_Stuff/VWMcsv.csv')
data_out <- create_datavyu_trial_data(data, write = F)
View(data)
data_out <- create_ET_trial_data(data, write = F)
View(data)
library(DDLab)
data_out <- create_ET_trial_data(data, write = F)
View(data_out)
View(data)
View(data)
tolook <- filter(data_out, RECORDING_SESSION_LABEL == '06004B11' & trial == 1)
tolook <- filter(data, RECORDING_SESSION_LABEL == '06004B11' & trial == 1)
View(tolook)
tolook <- filter(data, RECORDING_SESSION_LABEL == '06004B11' & trial == 2)
sum(tolook$CURRENT_FIX_DURATION)
tolook <- filter(tolook, !is.nan(CURRENT_FIX_INTEREST_AREA_LABEL))
View(tolook)
tolook <- filter(tolook, CURRENT_FIX_INTEREST_AREA_LABEL != 'NaN')
View(tolook)
sum(tolook$CURRENT_FIX_DURATION)
data_out <- create_ET_trial_data(data, write = T)
data_out <- create_ET_trial_data(data, 'VWM', write = T)
View(data_out)
roxygenise()
library(DDLab)
data <- read_csv('../Eyetracking_EL_Stuff/datavyu_out.csv')
library(DDLab)
dv_data <- create_datavyu_trial_data(data, write = F)
} )
library(DDLab)
dv_data <- create_datavyu_trial_data(data, write = F)
library(DDLab)
dv_data <- create_datavyu_trial_data(data, write = F)
data <- read_csv('../Eyetracking_EL_Stuff/datavyu_out.csv')
dv_data <- create_datavyu_trial_data(data, write = F)
View(dv_data)
library(DDLab)
library(readr)
data <- read_csv('../Eyetracking_EL_Stuff/datavyu_out.csv')
create_datavyu_trial_data(data = data)
library(DDLab)
create_datavyu_trial_data(data = data)
library(DDLab)
create_datavyu_trial_data(data = data)
library(DDLab)
create_datavyu_trial_data(data = data)
library(DDLab)
create_datavyu_trial_data(data = data)
library(DDLab)
create_datavyu_trial_data(data = data)
library(DDLab)
create_datavyu_trial_data(data = data)
?inner_join()
create_datavyu_trial_data(data = data, write = T)
library(DDLab)
create_datavyu_trial_data(data = data, write = T)
library(DDLab)
ET <- read_csv('../Eyetracking_EL_Stuff/Clean_Data_VWM.csv')
DV <- read_csv('../Eyetracking_EL_Stuff/Coded_Data_.csv')
View(DV)
View(ET)
all <- full_join(ET, DV)
all2 <- all %>%
arrange(ID, Trial)
View(all2)
?distinct()
all <- full_join(DV, ET)
all2 <- all %>%
arrange(ID, Trial)
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID,
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(lead(ToCode) == 'Coded' & ToCode == 'N' & lead(ID) == ID,
'Y', 'N'))
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID,
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID,
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(lead(ToCode) == 'Coded' & ToCode == 'Y' & lead(ID) == ID,
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
ungroup() %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(lead(ToCode) == 'Coded' & ToCode == 'Y',
'Y', 'N'))
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
ungroup() %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(lead(ToCode) == 'Coded' & ToCode == 'Y',
'Y', 'N'))
all <- full_join(DV, ET)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N',
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N',
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID & lead(Trial) == Trial,
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(lead(ToCode) == 'Coded' & ToCode == 'Y' & lead(ID) == ID & lead(Trial) == Trial,
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID & lead(Trial) == Trial,
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lead(ToCode) == 'Coded' & lead(ID) == ID & lead(Trial) == Trial,
'Y', 'N'))
?lead()
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID & lead(Trial) == Trial,
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lag(ToCode) == 'Coded' & lag(ID) == ID & lag(Trial) == Trial,
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lag(ToCode) == 'N' & lag(ID) == ID & lead(Trial) == Trial,
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lead(ToCode) == 'N',
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lead(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lag(ToCode) == 'Coded' & lag(ID) == ID & lag(Trial) == Trial,
'Y', 'N'))
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lead(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lag(ToCode) == 'Coded',
'Y', 'N'))
View(all2)
all <- full_join(DV, ET)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lead(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lag(ToCode) == 'Coded',
'Y', 'N')) %>%
filter(remove != 'Y')
all2$remove <- NULL
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lead(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lag(ToCode) == 'Coded',
'Y', 'N'))
View(all2)
all2 <- all %>%
arrange(ID, Trial) %>%
group_by(ID, Trial) %>%
mutate(remove = ifelse(ToCode == 'Coded' & lead(ToCode) == 'N',
'Y', 'N')) %>%
filter(remove != 'Y') %>%
mutate(remove = ifelse(ToCode == 'Y' & lag(ToCode) == 'Coded',
'Y', 'N')) %>%
mutate(remove = ifelse(is.na(remove), 'N', remove)) %>%
filter(remove != 'Y')
all2$remove <- NULL
library(DDLab)
roxygen2::roxygenize()
library(DDLab)
roxygen2::roxygenize()
